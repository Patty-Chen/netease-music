# netease-music
手机端网易云音乐 

项目内容： 实现网易云音乐的前端功能，包括：推荐歌单，最新音乐，热歌榜，搜索，歌曲播放等等 可以自适应手机屏幕宽度

使用jquery和部分原生js完成dom操作

项目重点: 歌词的滚动 旋转唱片的动画效果 搜索框节流函数的使用 使用正则处理歌词文本

使用正则处理歌词文本: 使用与.lrc文件格式相同的歌词文本 使用正则匹配得到每行歌词的时间和内容

歌词滚动: 使用audio标签的currentTime属性获取当前播放时间,每500ms与正则处理的歌词时间进行比较来判断是否需要换下一行 如需要则设置歌词元素的translateY属性 来实现歌词滚动

旋转唱片的动画效果: 网易云音乐的旋转唱片特效 经过对其网页代码的研究后 发现使用了一张在深色背景下能实现反光特效的图片 利用该图片的旋转实现旋转唱片特效

搜索框的实现: 监听input事件 使用节流函数来避免用户输入一个关键词的过程中多次触发搜索请求 每次触发事件监听回调时重置一个500ms定时器 该定时器回调为真正的搜索请求 实现只有用户在500ms内没有输入时 才认为输入完成触发搜索


项目遇到的问题:
1 使用七牛云存储 本地开发时并未使用https加密协议 但由于github.io要求https访问 造成网页里的部分使用http协议访问的图片无法发送访问请求

随即直接在网页中将url改为https协议 又因浏览器认为不是安全连接 请求被默认拦截 在经过搜索资料 对几种可能的解决方案进行分析后 利用https的网页也可以利用

http加载某些特定格式的图片这个特点 将webp格式的图片转为jpg格式 使用http成功访问

该解决方案带来的缺点是 jpg的图片大小明显超过webp格式的 可能会降低加载速度

2 由于没有实现后台 因此直接存储了少量歌曲到一个文件 模拟后台数据 使得应用的部分功能较为单薄

项目预览地址: https://patty-chen.github.io/netease-music/index.html
